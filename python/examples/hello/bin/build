#!/bin/bash

set -e

if [[ "$LANGUAGE_VERSION" == "python2" ]]; then
    PIP="pip"
elif [[ "$LANGUAGE_VERSION" == "python3" ]]; then
    PIP="pip3"
else
    echo "A python version needs to be specified"
    exit 1
fi

if [ -e "/home/algo/.local" ]; then
    echo "Making the link will fail"
    exit 1
fi

if [ ! -d "dependencies" ]; then
    mkdir dependencies
fi

ln -s `pwd`/dependencies /home/algo/.local
$PIP install -r requirements.txt --user

zip -r algorithm.zip .
